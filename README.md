# Primitive Database

**Primitive Database** — это консольная база данных на Python с поддержкой управления таблицами, CRUD-операций, типизации данных, кэширования и расширенной обработки ошибок с помощью декораторов. Проект демонстрирует основы реализации собственной системы хранения данных и предоставляет удобный интерфейс командной строки.

---

## Основные возможности

### 1. Управление таблицами

Поддерживаемые команды:

- `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ...`  
  Создает таблицу с указанными столбцами. Автоматически добавляется столбец `ID:int`.

- `drop_table <имя_таблицы>`  
  Удаляет таблицу. Перед удалением запрашивается подтверждение.

- `list_tables`  
  Показывает список всех существующих таблиц.

- `help`  
  Выводит справочную информацию по командам.

- `exit`  
  Выход из программы.


### 2. CRUD-операции с данными

Поддерживаемые команды:

insert into <имя_таблицы> values (<значение1>, <значение2>, ...)
Добавляет запись в таблицу. Значение ID генерируется автоматически.

select from <имя_таблицы>
Выводит все записи таблицы.

select from <имя_таблицы> where <столбец> = <значение>
Фильтрует записи по условию.

update <имя_таблицы> set <столбец1>=<новое_значение1> where <столбец_условия>=<значение_условия>
Обновляет записи по условию.

delete from <имя_таблицы> where <столбец> = <значение>
Удаляет записи по условию. Запрашивает подтверждение перед удалением.

info <имя_таблицы>
Выводит информацию о таблице: список столбцов и количество записей.

### 3. Особенности реализации

Типизация данных: Поддерживаются только int, str, bool. Ввод других типов вызывает ошибку.

Автогенерация ID: Каждая запись получает уникальный идентификатор.

Сохранение данных: Метаданные таблиц хранятся в db_meta.json, данные каждой таблицы — в отдельном файле data/<table_name>.json.

Декораторы:

handle_db_errors — централизованная обработка ошибок (KeyError, ValueError, FileNotFoundError).

confirm_action — запрос подтверждения у пользователя для опасных операций (drop_table, delete).

log_time — измерение времени выполнения функций.

Кэширование: Результаты SELECT-запросов кэшируются с помощью замыкания для ускорения повторных запросов.

PrettyTable: Для красивого отображения таблиц в консоли.

### Установка и запуск

Через Poetry:

```bash
poetry install
poetry run database
``` 


Через Makefile:

```bash
make install
make run
```

После запуска откроется консоль базы данных, готовая к вводу команд.

Пример работы asciinema: https://asciinema.org/a/j1mHmHaJcGqyO616WA356rnQR 
